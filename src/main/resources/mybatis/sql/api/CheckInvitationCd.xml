<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kdc.mybatis.mapper.api.CheckInvitationCdMapper">
  <update id="updateInvitationManagement" parameterType="com.kdc.common.entity.db.InvitationManagementEntity">
        UPDATE
            invitation_management

        SET
            guest_telephone_number = #{rec.guesttelephonenumber}

        WHERE
            invitation_code = #{rec.invitationcode}
        AND guest_user_id IS NULL
        AND guest_telephone_number IS NULL
        AND expiration_date <![CDATA[ >= ]]> #{rec.expirationdate}
        AND used_flg = 0
  </update>
</mapper>
