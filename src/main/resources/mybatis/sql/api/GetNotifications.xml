<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kdc.mybatis.mapper.api.GetNotificationsMapper">
    <select id="getNotificationList" resultType="com.kdc.common.entity.db.NotificationInfoEntity">
        SELECT
            group_id                                        AS  groupId,
            user_id											AS  userId,
            notification_date                               AS  notificationDate,
            notification_time                               AS  notificationTime,
            auth_level                                   	AS  authLevel,
            notification_level                              AS  notificationLevel,
            notification_flg                                AS  notificationFlg,
            message                                   		AS  message,
            register_user_id                                AS  registeruserid,
            register_date                                   AS  registerdate,
            update_user_id                                  AS  updateuserid,
            update_date                                     AS  updatedate

        FROM
            notification_info
       WHERE
            user_id  = #{userId}
       AND  
            group_id = #{groupId}
       AND  del_flg  = 0
       <if test='notificationDate != null'>
        AND  notification_date = #{notificationDate}
	    </if>       
	   ORDER BY register_date
       
    </select>
</mapper>
